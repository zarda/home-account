<div class="ai-settings-container">
  <!-- Status Banner -->
  <div class="status-banner" [class.offline]="!isOnline()" [class.ready]="canUseCloud() || canUseNative()">
    <mat-icon>
      @if (!isOnline()) {
        cloud_off
      } @else if (canUseNative()) {
        smartphone
      } @else if (canUseCloud()) {
        check_circle
      } @else {
        info
      }
    </mat-icon>
    <span>{{ statusText() }}</span>
  </div>

  <!-- Cloud AI Status -->
  <div class="setting-section">
    <h3>{{ 'settings.cloudAI' | translate }}</h3>
    <p class="section-description">{{ 'settings.cloudAIDescription' | translate }}</p>
    
    <div class="cloud-status">
      @if (isGeminiAvailable()) {
        <div class="status-chip ready">
          <mat-icon>check_circle</mat-icon>
          <span>{{ 'settings.geminiConfigured' | translate }}</span>
        </div>
      } @else {
        <div class="status-chip not-ready">
          <mat-icon>warning</mat-icon>
          <span>{{ 'settings.geminiNotConfigured' | translate }}</span>
        </div>
      }
    </div>
  </div>

  <mat-divider></mat-divider>

  <!-- Offline Queue -->
  <div class="setting-section">
    <div class="toggle-header">
      <div class="toggle-info">
        <h3>{{ 'settings.autoSync' | translate }}</h3>
        <p class="section-description">{{ 'settings.autoSyncDescription' | translate }}</p>
      </div>
      <mat-slide-toggle 
        [checked]="autoSync()"
        (change)="onAutoSyncChange($event.checked)"
        color="primary">
      </mat-slide-toggle>
    </div>

    @if (pendingQueueCount() > 0) {
      <div class="queue-status">
        <mat-icon>pending</mat-icon>
        <span>{{ 'settings.pendingItems' | translate: { count: pendingQueueCount() } }}</span>
        <button 
          mat-stroked-button 
          (click)="syncQueue()"
          [disabled]="!isOnline()">
          {{ 'settings.syncNow' | translate }}
        </button>
        <button 
          mat-icon-button 
          color="warn" 
          (click)="clearQueue()"
          matTooltip="{{ 'settings.clearQueue' | translate }}">
          <mat-icon>delete_sweep</mat-icon>
        </button>
      </div>
    }
  </div>

  <mat-divider></mat-divider>

  <!-- Cache Info -->
  <div class="setting-section">
    <h3>{{ 'settings.cacheStorage' | translate }}</h3>
    <div class="cache-info">
      <div class="cache-item">
        <span class="cache-label">{{ 'settings.totalCache' | translate }}</span>
        <span class="cache-value">{{ formattedCacheSize() }}</span>
      </div>
    </div>
  </div>
</div>
