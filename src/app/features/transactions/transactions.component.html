<div class="flex flex-col gap-4">
  <!-- Header -->
  <div class="flex items-center justify-between">
    <h1 class="text-2xl font-bold text-gray-900 dark:text-gray-100 m-0 flex items-center gap-2">{{ 'transactions.title' | translate }} <span class="text-base font-normal text-gray-400 dark:text-gray-500 leading-none">({{ transactionCount() }})</span></h1>

    <!-- Add Menu Button -->
    <button
      mat-fab
      color="primary"
      [matMenuTriggerFor]="addMenu"
      class="!w-12 !h-12 !min-w-0"
    >
      <mat-icon>add</mat-icon>
    </button>
    <mat-menu #addMenu="matMenu" xPosition="before">
      <button mat-menu-item (click)="openAddDialog()">
        <mat-icon>add</mat-icon>
        <span>{{ 'transactions.addTransaction' | translate }}</span>
      </button>
      <button mat-menu-item (click)="navigateToImportFile()">
        <mat-icon>upload_file</mat-icon>
        <span>{{ 'import.importFromFile' | translate }}</span>
      </button>
      @if (deviceService.isMobile()) {
        <button mat-menu-item (click)="openCameraDialog()">
          <mat-icon>photo_camera</mat-icon>
          <span>{{ 'import.importFromCamera' | translate }}</span>
        </button>
      }
    </mat-menu>
  </div>

  <!-- Filters -->
  <app-transaction-filters
    [categories]="expenseCategories()"
    [incomeCategories]="incomeCategories()"
    [initialDate]="initialDate()"
    [showAll]="showAll()"
    (filtersChanged)="onFiltersChanged($event)"
  />

  <!-- Transaction List -->
  @if (isLoading()) {
    <app-loading-spinner [message]="'transactions.loading' | translate" />
  } @else {
    <app-transaction-list
      [transactions]="transactions()"
      [categories]="categoriesMap()"
      (edit)="openEditDialog($event)"
      (delete)="onDeleteTransaction($event)"
    />
  }
</div>
