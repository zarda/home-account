<div class="budgets-page p-4 md:p-6">
  <!-- Header -->
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-bold text-gray-900 dark:text-gray-100">{{ 'budget.title' | translate }}</h1>
  </div>

  <!-- Tabs -->
  <mat-tab-group class="budget-tabs" animationDuration="200ms">
    <!-- Budgets Tab -->
    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon class="tab-icon">savings</mat-icon>
        <span>{{ 'budget.budgets' | translate }}</span>
        @if (budgetCount() > 0) {
          <span class="tab-badge">{{ budgetCount() }}</span>
        }
      </ng-template>

      <div class="tab-content">
        <!-- Add Budget Button -->
        <div class="tab-header">
          <p class="tab-description">{{ 'budget.budgetsDescription' | translate }}</p>
          <button mat-flat-button color="primary" (click)="openAddDialog()">
            <mat-icon>add</mat-icon>
            {{ 'budget.addBudget' | translate }}
          </button>
        </div>

        <!-- Budget Content -->
        @if (isLoading()) {
          <app-loading-spinner />
        } @else if (budgets().length === 0) {
          <app-empty-state
            icon="savings"
            [title]="'budget.noBudgets' | translate"
            [description]="'budget.noBudgetsDescription' | translate"
            [actionLabel]="'budget.createBudget' | translate"
            actionIcon="add"
            (action)="openAddDialog()"
          />
        } @else {
          <div class="budget-grid">
            <app-budget-overview
              [budgets]="budgets()"
              [categories]="categoriesMap()"
              (edit)="openEditDialog($event)"
              (delete)="confirmDelete($event)"
            />
          </div>
        }
      </div>
    </mat-tab>

    <!-- Recurring Transactions Tab -->
    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon class="tab-icon">repeat</mat-icon>
        <span>{{ 'settings.recurring' | translate }}</span>
      </ng-template>

      <div class="tab-content">
        <app-recurring-transactions />
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
