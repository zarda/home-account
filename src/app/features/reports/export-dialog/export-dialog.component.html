<h2 mat-dialog-title>
  <mat-icon class="title-icon">download</mat-icon>
  Export Data
</h2>

<mat-dialog-content>
  <div class="export-dialog-content">
    <!-- Export Info -->
    <div class="export-info">
      <div class="info-item">
        <mat-icon>receipt_long</mat-icon>
        <span>{{ transactionCount }} transactions</span>
      </div>
      <div class="info-item">
        <mat-icon>date_range</mat-icon>
        <span>{{ dateRangeLabel }}</span>
      </div>
    </div>

    <!-- Format Selection -->
    <div class="format-selection">
      <span class="section-label" id="format-label">Export Format</span>
      <mat-radio-group [(ngModel)]="selectedFormat" class="format-radio-group" aria-labelledby="format-label">
        @for (option of formatOptions; track option.value) {
          <mat-radio-button [value]="option.value" class="format-option">
            <div class="option-content">
              <div class="option-icon">
                <mat-icon>{{ option.icon }}</mat-icon>
              </div>
              <div class="option-details">
                <span class="option-label">{{ option.label }}</span>
                <span class="option-description">{{ option.description }}</span>
              </div>
            </div>
          </mat-radio-button>
        }
      </mat-radio-group>
    </div>

    <!-- Options -->
    @if (selectedFormat === 'csv') {
      <div class="export-options">
        <span class="section-label">Options</span>
        <mat-checkbox [(ngModel)]="includeDetails">
          Include detailed information (notes, tags)
        </mat-checkbox>
      </div>
    }
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="cancel()" [disabled]="isExporting">Cancel</button>
  <button
    mat-flat-button
    color="primary"
    (click)="export()"
    [disabled]="isExporting"
  >
    @if (isExporting) {
      <mat-spinner diameter="20" class="btn-spinner"></mat-spinner>
      Exporting...
    } @else {
      <mat-icon>download</mat-icon>
      Export
    }
  </button>
</mat-dialog-actions>
