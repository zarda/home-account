<mat-card class="card">
  <!-- Header -->
  <div class="card-header">
    <h3 class="card-title">{{ 'dashboard.recentTransactions' | translate }}</h3>
    <a routerLink="/transactions" [queryParams]="{showAll: true}" class="view-all-link">
      {{ 'dashboard.viewAll' | translate }}
      <mat-icon class="view-all-icon">chevron_right</mat-icon>
    </a>
  </div>

  <!-- Content -->
  <div class="card-content">
    @if (transactions.length === 0) {
      <div class="empty-container">
        <app-empty-state
          icon="receipt_long"
          [title]="'transactions.noTransactions' | translate"
          [description]="'dashboard.addFirstTransaction' | translate"
          [actionLabel]="'transactions.addTransaction' | translate"
          actionIcon="add"
          (action)="onAddTransaction()"
        />
      </div>
    } @else {
      <div class="transaction-list">
        @for (transaction of transactions; track transaction.id; let last = $last) {
          <div class="transaction-item"
               tabindex="0"
               role="button"
               (click)="onTransactionClick(transaction)"
               (keydown.enter)="onTransactionClick(transaction)"
               (keydown.space)="onTransactionClick(transaction)">
            <!-- Category Icon -->
            <div
              class="category-icon"
              [style.background-color]="getCategoryColor(transaction.categoryId) + '15'"
            >
              <mat-icon [style.color]="getCategoryColor(transaction.categoryId)">
                {{ getCategoryIcon(transaction.categoryId) }}
              </mat-icon>
            </div>

            <!-- Details -->
            <div class="transaction-details">
              <span class="transaction-description">{{ transaction.description }}</span>
              <span class="transaction-category">{{ getCategoryName(transaction.categoryId) }}</span>
            </div>

            <!-- Amount -->
            <div class="transaction-amount">
              <span
                class="amount"
                [class.income]="transaction.type === 'income'"
                [class.expense]="transaction.type === 'expense'"
              >
                {{ transaction.type === 'income' ? '+' : '-' }}{{ formatAmount(transaction.amount, transaction.currency) }}
              </span>
              <span class="transaction-date">{{ formatRelativeDate(transaction.date) }}</span>
            </div>
          </div>
          @if (!last) {
            <div class="divider"></div>
          }
        }
      </div>
    }
  </div>
</mat-card>
