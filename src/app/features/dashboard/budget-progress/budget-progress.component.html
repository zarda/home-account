<mat-card class="!rounded-xl">
  <mat-card-header class="!px-4 !pt-4 flex justify-between items-center">
    <mat-card-title class="text-lg font-semibold">Budget Progress</mat-card-title>
    <a mat-button color="primary" routerLink="/budgets" class="!-mr-2">
      Manage
      <mat-icon iconPositionEnd>arrow_forward</mat-icon>
    </a>
  </mat-card-header>

  <mat-card-content class="!p-4">
    <div class="space-y-4">
      @for (budget of budgets; track budget.id) {
        <div class="p-3 bg-gray-50 rounded-lg">
          <div class="flex items-center justify-between mb-2">
            <div class="flex items-center gap-2">
              <mat-icon
                class="!text-xl"
                [style.color]="getCategoryColor(budget.categoryId)"
              >
                {{ getCategoryIcon(budget.categoryId) }}
              </mat-icon>
              <span class="font-medium text-gray-900">{{ budget.name }}</span>
            </div>
            <span class="text-sm text-gray-500">
              {{ formatAmount(budget.spent, budget.currency) }} /
              {{ formatAmount(budget.amount, budget.currency) }}
            </span>
          </div>

          <mat-progress-bar
            [value]="getPercentage(budget)"
            [color]="getProgressColor(budget)"
            class="!h-2 !rounded-full"
          />

          <div class="flex justify-between mt-1">
            <span
              class="text-xs"
              [class.text-green-600]="getPercentage(budget) < 80"
              [class.text-yellow-600]="getPercentage(budget) >= 80 && getPercentage(budget) < 100"
              [class.text-red-600]="getPercentage(budget) >= 100"
            >
              {{ getPercentage(budget).toFixed(0) }}% used
            </span>
            <span class="text-xs text-gray-500">
              {{ getRemainingText(budget) }}
            </span>
          </div>
        </div>
      }
    </div>
  </mat-card-content>
</mat-card>
