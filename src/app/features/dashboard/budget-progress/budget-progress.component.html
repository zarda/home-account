<mat-card class="!rounded-xl">
  <mat-card-header class="!px-4 !pt-3 !pb-0 flex justify-between items-center">
    <mat-card-title class="!text-base font-semibold">{{ 'dashboard.budgetProgress' | translate }}</mat-card-title>
    <a mat-button color="primary" routerLink="/budgets" class="!-mr-2 !text-sm">
      {{ 'budget.manage' | translate }}
      <mat-icon iconPositionEnd class="!text-base">arrow_forward</mat-icon>
    </a>
  </mat-card-header>

  <mat-card-content class="!p-3">
    <div class="space-y-2">
      @for (budget of budgets(); track budget.id) {
        <div class="budget-item">
          <div class="budget-header">
            <div class="budget-info">
              <mat-icon [style.color]="getCategoryColor(budget.categoryId)">
                {{ getCategoryIcon(budget.categoryId) }}
              </mat-icon>
              <span class="budget-name">{{ budget.name }}</span>
            </div>
            <span class="budget-percentage" [class]="getPercentageClass(budget)">
              {{ getPercentage(budget).toFixed(0) }}%
            </span>
          </div>

          <mat-progress-bar
            [value]="getPercentage(budget)"
            [color]="getProgressColor(budget)"
          />

          <div class="budget-footer">
            <span class="budget-amounts">
              {{ formatAmount(getBudgetSpent(budget), budget.currency) }} / {{ formatAmount(budget.amount, budget.currency) }}
            </span>
          </div>
        </div>
      }
    </div>
  </mat-card-content>
</mat-card>
